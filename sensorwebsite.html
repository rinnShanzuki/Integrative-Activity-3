<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f5f5f5;
        }
        h1 {
            font-size: 40px;
            margin-top: 20px;
        }
        .dashboard {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        .card {
            background: #fffdfa;
            padding: 30px;
            border-radius: 20px;
            width: 250px;
            box-shadow: 4px 4px 15px rgba(0, 0, 0, 0.2);
        }
        .card img {
            width: 80px;
            height: 80px;
        }
        .card h2 {
            font-size: 22px;
            margin: 15px 0;
        }
        .value {
            font-size: 36px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>SENSOR DATA DASHBOARD</h1>

    <div class="dashboard">
        <div class="card">
            <img src="https://static.vecteezy.com/system/resources/thumbnails/019/860/394/small/thermometer-icon-colorful-free-png.png" alt="Temperature">
            <h2>TEMPERATURE</h2>
            <div class="value" id="temperature">-- °C</div>
        </div>

        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/512/3262/3262970.png" alt="Humidity">
            <h2>HUMIDITY</h2>
            <div class="value" id="humidity">-- %</div>
        </div>

        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/128/869/869869.png" alt="Light">
            <h2>LIGHT</h2>
            <div class="value" id="light">--</div>
        </div>

        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/512/4473/4473658.png" alt="DateTime">
            <h2>DATE/TIME</h2>
            <div class="value" id="timestamp">--</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getFirestore, collection, query, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyBXhD1PNpXNJ8Ce6GYbuWKsiZyliqAGcxE",
            authDomain: "firstproject-2cda0.firebaseapp.com",
            projectId: "firstproject-2cda0",
            storageBucket: "firstproject-2cda0.firebasestorage.app",
            messagingSenderId: "497535357750",
            appId: "1:497535357750:web:b127275b1a465d51de9997"
        };
    
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        async function fetchData() {
            const q = query(collection(db, "sensorsdata"), orderBy("timestamp", "desc"), limit(1));
            const querySnapshot = await getDocs(q);
    
            if (!querySnapshot.empty) {
                const doc = querySnapshot.docs[0];
                const data = doc.data();
    
                document.getElementById("temperature").innerText = `${data.temperature} °C`;
                document.getElementById("humidity").innerText = `${data.humidity} %`;
                document.getElementById("light").innerText = data.light === 1 ? "0" : "1";
                document.getElementById("timestamp").innerText = data.timestamp;
            } else {
                console.log("No sensor data found.");
            }
        }
    
        setInterval(fetchData, 5000);
        fetchData();
    </script>
    

</body>
</html>
